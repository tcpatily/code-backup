<div class="card_box">
    <div class="top_block">
        <div class="img_slider owl-carousel">
            <div v-for="pic in pkgData.packageDetail.tcilHolidayPhotoVideoSrp" class="img_box item">
                <img class="testtt" :src="getImages(pic)" :alt="pic.altTag">
                <!-- baseImageURL/holidays/pic.packageId/photos/pic.path -->
            </div>
        </div>
        <div class="over_img">
            <div class="left_strip primary" v-if="(pkgData.packageDetail.isTcilRecomended == 'Most Booked') && !(pkgData.packageDetail.offers != undefined && pkgData.packageDetail.offers != '')">
                <img src="/images/tcHolidays/srp/thumbs-up.svg" alt="">
                <span>Most Booked</span>
            </div>
            <div class="left_strip Most-Booked" v-if="(pkgData.packageDetail.isTcilRecomended == 'Recommended') && !(pkgData.packageDetail.offers != undefined && pkgData.packageDetail.offers != '')">
                <img src="/images/tcHolidays/SRP-Tags/Most-Booked.svg" alt="">
                <span>Recommended</span>
            </div>
            <div class="left_strip Honeymoon-Special" v-if="(pkgData.packageDetail.isTcilRecomended == 'Honeymoon Special') && !(pkgData.packageDetail.offers != undefined && pkgData.packageDetail.offers != '')">
                <img src="/images/tcHolidays/SRP-Tags/Honeymoon-Special.svg" alt="">
                <span>Honeymoon Special</span>
            </div>
            <div class="left_strip primary" v-if="(pkgData.packageDetail.isTcilRecomended == 'Online Exclusive') && !(pkgData.packageDetail.offers != undefined && pkgData.packageDetail.offers != '')">
                <img src="/images/tcHolidays/srp/stars.svg" alt="">
                <span>Online Exclusive</span>
            </div>
            <div class="left_strip Deal-Available" v-if="pkgData.packageDetail.offers != undefined && pkgData.packageDetail.offers != ''"
                :title="pkgData.packageDetail.offers">
                <img src="/images/tcHolidays/SRP-Tags/Deal-Available.svg" alt="">
                <span>Deal Available</span>
            </div>
            <div class="left_strip Xmas-New-Year-Special" v-if="(pkgData.packageDetail.isTcilRecomended == 'Xmas & New Year Departures') && !(pkgData.packageDetail.offers != undefined && pkgData.packageDetail.offers != '')">
                <img src="/images/tcHolidays/SRP-Tags/Xmas-New-Year-Special.svg" alt="">
                <span>Xmas & New Year Departures</span>
            </div>
            <div class="left_strip Diwali-Special" v-if="(pkgData.packageDetail.isTcilRecomended == 'Diwali Departures') && !(pkgData.packageDetail.offers != undefined && pkgData.packageDetail.offers != '')">
                <img src="/images/tcHolidays/SRP-Tags/Diwali-Special.svg" alt="">
                <span>Diwali Departures</span>
            </div>
            <div class="left_strip Durga-Puja-Special" v-if="(pkgData.packageDetail.isTcilRecomended == 'Durga Puja Departures') && !(pkgData.packageDetail.offers != undefined && pkgData.packageDetail.offers != '')">
                <img src="/images/tcHolidays/SRP-Tags/Durga-Puja-Special.svg" alt="">
                <span>Durga Puja Departures</span>
            </div>
            <div class="wishlist" v-if="loggedInDetails?.user != 'Staff'"
                @click="wishlistSrp(pkgData.packageDetail.isWishlist,pkgData.packageDetail.packageId)">
                <!--<img src="/images/tcHolidays/srp/heart-outline.svg" alt="">-->
                <div class="wishlist-btn">
                    <i class="" :class="pkgData.packageDetail.isWishlist ? 'icon-svg-favorite-solid' : 'icon-svg-favorite' "></i>
                </div>
            </div>
            <div class="ratings" v-if="onBehalf === 'true'">
                <img src="/images/tcHolidays/srp/star.svg" alt="">
                <span><b>4.1</b>(1k)</span>
            </div>
        </div>
        <div class="compare">
            <div class="form-check">
                <input class="form-check-input addTo_Compare" type="checkbox" value="" id="addToCompare01">
                <label class="form-check-label" for="addToCompare01">
                    Add to Compare
                </label>
            </div>
        </div>
    </div>

    <div class="cbt_blc">
        <div class="center_block">
            <div class="ctop_blc">
                <div class="ctl_blc">
                    <span>{{ pkgData.packageDetail.duration - 1 }}N/{{ pkgData.packageDetail.duration }}D</span>
                    <span v-if="(pkgData.isCustomizedHolidaysPkg == true && pkgData.packageDetail.pkgSubtypeId.pkgSubtypeName == 'GIT') || pkgData.packageDetail.pkgSubtypeId.pkgSubtypeName != 'GIT'">Customized Tour</span>
                    <span v-if="pkgData.isCustomizedHolidaysPkg == false && pkgData.packageDetail.pkgSubtypeId.pkgSubtypeName == 'GIT'">Group Tour</span>
                    <span v-if="onBehalf !== 'true'">{{ getTourType(selectedTourTypes[pkgData.packageDetail.packageId] !== undefined ? selectedTourTypes[pkgData.packageDetail.packageId] : pkgData.minimumPricePackageClassId) }}</span>
                    <!-- <select class="tour-type-select"
                            :value="selectedTourTypes[pkgData.packageDetail.packageId] !== undefined ? selectedTourTypes[pkgData.packageDetail.packageId] : pkgData.minimumPricePackageClassId"
                            @change="changeTourType(pkgData, $event)">
                        <option v-if="pkgData.packageDetail.isPackageClassStandard == 'Y'" value="0">Standard</option>
                        <option v-if="pkgData.packageDetail.isPackageClassDelux == 'Y'" value="1">Value</option>
                        <option v-if="pkgData.packageDetail.isPackageClassPremium == 'Y'" value="2">Preminum</option>
                    </select> -->
                </div>
                <div class="ratings" v-if="pkgData.packageDetail.rating && onBehalf !== 'true'">
                    <span class="star"><img src="/images/tcHolidays/star.svg" alt=""></span>
                    <span>{{pkgData.packageDetail.rating}}</span>
                    <span v-if="pkgData.packageDetail.noOfCustomers">({{formatNumber(pkgData.packageDetail.noOfCustomers)}})</span>
                </div>
                <div class="select_wrapper" v-if="onBehalf === 'true'">
                    <select 
                        class="form-select"
                        :value="selectedTourTypes[pkgData.packageDetail.packageId] !== undefined ? selectedTourTypes[pkgData.packageDetail.packageId] : pkgData.minimumPricePackageClassId"
                        @change="changeTourType(pkgData, $event)" required>
                        <option v-if="pkgData.packageDetail.isPackageClassStandard == 'Y'" value="0">Standard</option>
                        <option v-if="pkgData.packageDetail.isPackageClassDelux == 'Y'" value="1">Value</option>
                        <option v-if="pkgData.packageDetail.isPackageClassPremium == 'Y'" value="2">Premium</option>
                    </select>
                </div>
            </div>
            <div class="ccntr_blc">
                <h6 :title="pkgData.packageDetail.pkgName">{{ pkgData.packageDetail.pkgName }}</h6>

                <!-- Desktop View -->
                <div class="ccbtm_blc d-none d-md-flex">
                    <span v-for="(timeline, index) in pkgData.packageDetail.tcilHolidayTimelineCollection.slice(0, 2)"
                        :key="index">
                        <span>{{ timeline.noOfNights }}N {{ timeline.cityCode.cityName }}</span>
                        <span
                            v-if="index !== pkgData.packageDetail.tcilHolidayTimelineCollection.slice(0, 2).length - 1"
                            class="dot"></span>
                    </span>
                    <span v-if="pkgData.packageDetail.tcilHolidayTimelineCollection.length > 2">
                        <a data-bs-toggle="tooltip" data-bs-placement="auto"
                            :title="getTimelineTitle(pkgData.packageDetail.tcilHolidayTimelineCollection)">
                            +{{ pkgData.packageDetail.tcilHolidayTimelineCollection.length - 2 }}
                        </a>
                    </span>
                </div>

                <!-- Mobile View -->
                <div class="ccbtm_blc d-flex d-md-none">
                    <span v-for="(timeline, index) in pkgData.packageDetail.tcilHolidayTimelineCollection"
                        :key="'mobile-' + index">
                        <span>{{ timeline.noOfNights }}N {{ timeline.cityCode.cityName }}</span>
                        <span v-if="index !== pkgData.packageDetail.tcilHolidayTimelineCollection.length - 1"
                            class="dot"></span>
                    </span>
                </div>
            </div>

            <div class="cbtm_blc">
                <div class="cbtm_inr">
                    <span v-if="pkgData.packageDetail.isFlightIncluded == 'Y'"
                        :class="pkgData.packageDetail.holidayPlusSubType == 2 ? 'optional' : ''" data-bs-toggle="modal"
                        data-bs-target="#optionalModal" data-tab="Flights">
                        <span v-if="pkgData.packageDetail.holidayPlusSubType == 2">Optional</span>
                        <img src="/images/tcHolidays/srp/flights.svg" alt="">
                        Flights
                    </span>
                    <span v-if="isAccommodationIncluded(pkgData)" data-bs-toggle="modal" data-bs-target="#optionalModal"
                        data-tab="hotels">
                        <img src="/images/tcHolidays/srp/hotel.svg" alt="">
                        Hotels
                    </span>
                    <span v-if="isSightseeingIncluded(pkgData)" data-bs-toggle="modal" data-bs-target="#optionalModal"
                        data-tab="sightseeing">
                        <img src="/images/tcHolidays/srp/camera.svg" alt="">
                        Sightseeing
                    </span>
                    <span v-if="isVisaIncluded(pkgData)" data-bs-toggle="modal" data-bs-target="#optionalModal"
                        data-tab="visa2">
                        <img src="/images/tcHolidays/srp/visa.svg" alt="">
                        Visa
                    </span>
                    <span v-if="isMealIncluded(pkgData)" data-bs-toggle="modal" data-bs-target="#optionalModal"
                        data-tab="meal">
                        <img src="/images/tcHolidays/srp/meal.svg" alt="">
                        Meal
                    </span>
                    <span v-if="pkgData.packageDetail.isTourManagerIncluded == 'Y'" data-bs-toggle="modal"
                        data-bs-target="#optionalModal" data-tab="tour-manager">
                        <img src="/images/tcHolidays/srp/tourist.svg" alt="">
                        Tour Manager
                    </span>
                </div>
                <div class="brdr_dotted"></div>
            </div>
        </div>

        <div class="bottom_block">
            <div class="fair_blc">
                <div class="btf_blc">
                    <span class="price" v-if="getStrikeoutPrice(pkgData)"><span class="rupeeSign"></span>{{ formatPrice(getStrikeoutPrice(pkgData)) }}</span>
                    <span class="discount" v-if="getDiscount(pkgData)">{{ getDiscount(pkgData) }}% OFF</span>
                </div>
                <h5>
                    <span class="rupeeSign"></span>{{ formatPrice(getCurrentPrice(pkgData)) }}
                    <span class="price_tag">Starting price per adult</span>
                </h5>
            </div>
            <button v-show="pkgData.packageDetail.srpAction === 'Y'"
                @click="bookPkg(pkgData.packageDetail.packageId, pkgData.minimumPricePackageClassId, pkgData.packageDetail.pkgSubtypeId.pkgTypeId, pkgData.packageDetail.pkgName, pkgData.packageDetail)"
                class="btn btn_primary">
                Book Online
            </button>

            <button v-if="pkgData.packageDetail.srpAction === 'N'"
                @click="bookPkg(pkgData.packageDetail.packageId, pkgData.minimumPricePackageClassId, pkgData.packageDetail.pkgSubtypeId.pkgTypeId, pkgData.packageDetail.pkgName, pkgData.packageDetail)"
                class="btn btn_primary">
                View Details
            </button>
        </div>
    </div>
</div>



<!-- Optional Modal -->
<div class="modal fade optional_modal" id="optionalModal" tabindex="-1" aria-labelledby="optionalModalLabel"
    aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <ul class="nav nav-tabs" id="myTab" role="tablist">
                    <li class="nav-item" role="presentation">
                        <button class="nav-link active" id="flights-tab" data-bs-toggle="tab" data-bs-target="#flights"
                            type="button" role="tab" aria-controls="flights" aria-selected="true">
                            <span class="optional">
                                <span class="text">Optional</span>
                                <img src="assets/img/srp/flights.svg" alt="">
                            </span>
                            Flights</button>
                    </li>
                    <li class="nav-item" role="presentation">
                        <button class="nav-link" id="hotels-tab" data-bs-toggle="tab" data-bs-target="#hotels"
                            type="button" role="tab" aria-controls="hotels" aria-selected="false">
                            <span><img src="assets/img/srp/hotel.svg" alt=""></span>
                            Hotels</button>
                    </li>
                    <li class="nav-item" role="presentation">
                        <button class="nav-link" id="sightseeing-tab" data-bs-toggle="tab" data-bs-target="#sightseeing"
                            type="button" role="tab" aria-controls="sightseeing" aria-selected="false">
                            <span><img src="assets/img/srp/camera.svg" alt=""></span>
                            Sightseeing</button>
                    </li>
                    <li class="nav-item" role="presentation">
                        <button class="nav-link" id="visa2-tab" data-bs-toggle="tab" data-bs-target="#visa2"
                            type="button" role="tab" aria-controls="visa" aria-selected="false">
                            <span><img src="assets/img/srp/visa.svg" alt=""></span>
                            Visa</button>
                    </li>
                    <li class="nav-item" role="presentation">
                        <button class="nav-link" id="meal-tab" data-bs-toggle="tab" data-bs-target="#meal" type="button"
                            role="tab" aria-controls="meal" aria-selected="false">
                            <span><img src="assets/img/srp/meal.svg" alt=""></span>
                            Meal</button>
                    </li>
                    <li class="nav-item" role="presentation">
                        <button class="nav-link" id="tour-manager-tab" data-bs-toggle="tab"
                            data-bs-target="#tour-manager" type="button" role="tab" aria-controls="tour-manager"
                            aria-selected="false">
                            <span><img src="assets/img/srp/tourist.svg" alt=""></span>
                            Tour Manager</button>
                    </li>
                </ul>

                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close">
                    <img src="assets/img/x.svg" alt="">
                </button>
            </div>
            <div class="modal-body">
                <div class="tab-content" id="myTabContent">
                    <div class="tab-pane fade show active" id="flights" role="tabpanel" aria-labelledby="flights-tab">
                        <div class="content_block">
                            <ul>
                                <li>Option to add flights available in this package in further steps</li>
                            </ul>
                        </div>
                    </div>
                    <div class="tab-pane fade" id="hotels" role="tabpanel" aria-labelledby="hotels-tab">
                        <div class="content_block">
                            <div class="inr_content">
                                <p>Hotels:</p>
                                <ul>
                                    <li>Arabian Park Edge by Rotana / Fortune Pearl / Admiral Plaza / City Max or
                                        similar in
                                        Dubai (Valid Till 31st March 2025)</li>
                                </ul>
                            </div>
                            <div class="inr_content">
                                <p>Hotels:</p>
                                <ul>
                                    <li>Howard Johson OR Citymax Hotel Bur Dubai or Fortune Pearl Hotel or Admiral
                                        Plaza
                                        Hotel Or similar in Dubai (For Apr - Sept 2025 Departures)</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                    <div class="tab-pane fade" id="sightseeing" role="tabpanel" aria-labelledby="sightseeing-tab">
                        <div class="content_block">
                            <div class="inr_content">
                                <ul>
                                    <li>Arrive at Dubai - Dhow Cruise with Buffet Dinner (SIC basis)</li>
                                    <li>Half Day City Tour of Dubai (SIC basis)</li>
                                    <li>Desert Safari with BBQ Dinner with Tanoora show and many more activities
                                        (SIC
                                        Basis)</li>
                                </ul>
                            </div>

                            <div class="inr_content">
                                <p>Transfer:</p>
                                <ul>
                                    <li>Airport / hotel / airport transfers on (PVT Basis)</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                    <div class="tab-pane fade" id="visa2" role="tabpanel" aria-labelledby="visa2-tab">
                        <div class="content_block">
                            <ul>
                                <li>Daily breakfast, except on Day 1</li>
                                <li>Dinner as per itinerary</li>
                            </ul>
                        </div>
                    </div>
                    <div class="tab-pane fade" id="meal" role="tabpanel" aria-labelledby="meal-tab">
                        <div class="content_block">
                            <ul>
                                <li>Daily breakfast, except on Day 1</li>
                                <li>Dinner as per itinerary</li>
                            </ul>
                        </div>
                    </div>
                    <div class="tab-pane fade" id="tour-manager" role="tabpanel" aria-labelledby="tour-manager-tab">
                        <div class="content_block">
                            <ul>
                                <li>Daily breakfast, except on Day 1</li>
                                <li>Dinner as per itinerary</li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>